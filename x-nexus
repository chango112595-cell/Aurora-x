#!/usr/bin/env python3
"""
Aurora-X Individual Server Control
Control individual Aurora services
Usage: 
  python3 x-nexus start <server>   - Start a specific server
  python3 x-nexus stop <server>    - Stop a specific server
  python3 x-nexus restart <server> - Restart a specific server
  python3 x-nexus status           - Show all server status
  
Available servers: vite, backend, bridge, self-learn, chat
"""

import sys
import os
import time

# Add tools directory to path
sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'tools'))

from luminar_nexus import LuminarNexusServerManager

def show_usage():
    print(__doc__)

if __name__ == "__main__":
    if len(sys.argv) < 2:
        show_usage()
        sys.exit(1)
    
    command = sys.argv[1]
    nexus = LuminarNexusServerManager()
    
    if command == "status":
        nexus.show_status()
    elif command == "start" and len(sys.argv) > 2:
        server = sys.argv[2]
        print(f"üöÄ Starting {server}...\n")
        nexus.start_server(server)
    elif command == "stop" and len(sys.argv) > 2:
        server = sys.argv[2]
        print(f"üõë Stopping {server}...\n")
        nexus.stop_server(server)
    elif command == "restart" and len(sys.argv) > 2:
        server = sys.argv[2]
        print(f"üîÑ Restarting {server}...\n")
        nexus.stop_server(server)
        time.sleep(2)
        nexus.start_server(server)
    else:
        print(f"‚ùå Invalid command: {command}\n")
        show_usage()
        sys.exit(1)
