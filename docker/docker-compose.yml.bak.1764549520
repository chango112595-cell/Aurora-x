version: '3.8'
services:
  aurora_runtime:
    build: ./runtime
    container_name: aurora_runtime
    volumes:
      - ../packs:/app/packs:ro
      - ../logs:/app/logs
    ports:
      - "5000:5000"
    environment:
      - AURORA_ENV=staging
  webui:
    build: ../aurora_webui/backend
    container_name: aurora_webui
    ports:
      - "8080:80"
    depends_on:
      - aurora_runtime
  prometheus:
    image: prom/prometheus:latest
    container_name: aurora_prom
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml
    ports:
      - "9090:9090"
  grafana:
    image: grafana/grafana:latest
    container_name: aurora_grafana
    ports:
      - "3000:3000"