<!doctype html><meta charset="utf-8"/>
<title>Aurora-X â€” Spec Runs</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
:root{--bg:#0b0f1a;--panel:#131a2a;--border:#1e2740;--text:#e6f0ff;--muted:#9fb3d9;--accent:#5cc8ff;--glow:rgba(92,200,255,.35)}
*{box-sizing:border-box}body{margin:0;font-family:system-ui,Segoe UI,Roboto,Ubuntu;color:var(--text);background:radial-gradient(1200px 600px at 20% -20%, rgba(92,200,255,.08), transparent), linear-gradient(180deg, #08101c, #0b0f1a 40%)}
.wrap{max-width:1080px;margin:28px auto;padding:0 16px}
.header{display:flex;align-items:center;gap:12px}
.pulse{width:14px;height:14px;border-radius:50%;background:var(--accent);box-shadow:0 0 12px var(--glow);position:relative}
.pulse::after{content:"";position:absolute;inset:-6px;border-radius:50%;border:2px solid var(--accent);opacity:.6;animation:pulse 2s infinite}
@keyframes pulse{0%{transform:scale(.9);opacity:.8}60%{transform:scale(1.2);opacity:0}100%{opacity:0}}
.card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));border:1px solid var(--border);border-radius:14px;padding:16px;margin:14px 0;backdrop-filter: blur(6px);}
h1{font-size:1.4rem;margin:0}.table{width:100%;border-collapse:collapse}.table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left}
.badge{padding:4px 10px;border-radius:10px;background:#142036;color:var(--accent);display:inline-block}
.small{color:var(--muted);font-size:13px}.spark{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:18px;letter-spacing:1px}
</style>
<div class="wrap">
  <div class="header"><div class="pulse"></div><h1>ðŸŒŒ Aurora-X â€” Spec Runs</h1></div>
  <div class="card">
    <div class="small">Live updates over WebSocket with AJAX fallback every 1.5s.</div>
    <table class="table" id="runs"><thead><tr><th>Run</th><th>Spec</th><th>Status</th><th>Bias</th><th>Report</th></tr></thead><tbody></tbody></table>
  </div>
</div>
<script>
(function(){
const tbody = document.querySelector("#runs tbody");
let ws;
function rowHtml(r){
  const badge = r.ok ? "âœ… PASS" : "âŒ FAIL";
  const bias = (r.bias !== undefined && r.bias !== null) ? (r.bias > 0 ? `+${r.bias.toFixed(2)}` : r.bias.toFixed(2)) : "â€”";
  return `<tr>
    <td><span class="badge">${r.run_id||"â€”"}</span></td>
    <td>${r.spec||"â€”"}</td>
    <td>${badge}</td>
    <td class="spark">${r.spark||bias}</td>
    <td>${r.report ? `<a href="${r.report}" target="_blank">report</a>` : "â€”"}</td>
  </tr>`;
}
async function poll(){
  try{
    const r = await fetch('/api/spec_runs'); const j = await r.json();
    tbody.innerHTML = (j.runs||[]).map(rowHtml).join('') || `<tr><td colspan="5">No runs yet</td></tr>`;
  }catch(e){/* ignore */}
}
function connectWS(){
  try{
    ws = new WebSocket((location.protocol === 'https:' ? 'wss://' : 'ws://') + location.host + '/ws/spec_updates');
    ws.onmessage = (ev)=>{ try{ const j = JSON.parse(ev.data); if(j.type==='spec_run'){ poll(); } }catch(e){} };
    ws.onclose = ()=> setTimeout(connectWS, 1500);
  }catch(e){ setTimeout(connectWS, 1500); }
}
setInterval(poll, 1500); poll(); connectWS();
})();
</script>