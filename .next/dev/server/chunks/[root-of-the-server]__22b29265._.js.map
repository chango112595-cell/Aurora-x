{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/negry/Aurora-x/server/aurora-chat.ts"],"sourcesContent":["import { WebSocket, WebSocketServer } from 'ws';\r\n\r\n// Aurora's chat WebSocket server\r\nexport function setupAuroraChatWebSocket(server: any) {\r\n  const wss = new WebSocketServer({ \r\n    server,\r\n    path: '/aurora/chat'\r\n  });\r\n\r\n  wss.on('connection', (ws: WebSocket) => {\r\n    console.log('[Aurora] New chat connection established');\r\n    \r\n    // Welcome message\r\n    ws.send(JSON.stringify({\r\n      message: 'Aurora online. All 27 mastery tiers active. How may I assist?'\r\n    }));\r\n\r\n    ws.on('message', async (data: Buffer) => {\r\n      try {\r\n        const { message, sessionId } = JSON.parse(data.toString());\r\n        console.log('[Aurora] Received:', message);\r\n        \r\n        // Aurora processes the message using her omniscient knowledge\r\n        const response = await processWithAuroraIntelligence(message, sessionId || 'websocket');\r\n        \r\n        ws.send(JSON.stringify({\r\n          message: response\r\n        }));\r\n      } catch (error) {\r\n        console.error('[Aurora] Error:', error);\r\n        ws.send(JSON.stringify({\r\n          message: 'Error processing request'\r\n        }));\r\n      }\r\n    });\r\n\r\n    ws.on('close', () => {\r\n      console.log('[Aurora] Chat connection closed');\r\n    });\r\n  });\r\n\r\n  console.log('[Aurora] Chat WebSocket server ready on /aurora/chat');\r\n}\r\n\r\nasync function processWithAuroraIntelligence(userMessage: string, sessionId: string = 'default'): Promise<string> {\r\n  // Route through Aurora Core with 188 power units\r\n  const { AuroraCore } = await import('./aurora-core');\r\n  const aurora = AuroraCore.getInstance();\r\n  \r\n  try {\r\n    // Use Aurora's analyze method which routes through Nexus V3\r\n    const result = await aurora.analyze(userMessage, sessionId);\r\n    const response = result.response || result.analysis || 'Aurora processed your request successfully.';\r\n    // Aurora's autonomous type safety: ensure string response\r\n    return typeof response === 'string' ? response : JSON.stringify(response);\r\n  } catch (error: any) {\r\n    console.error('[Aurora Chat] Intelligence error:', error);\r\n    \r\n    // Fallback: Try Python bridge directly\r\n    try {\r\n      const pythonResult = await aurora.callAuroraPython('analyze', {\r\n        input: userMessage,\r\n        context: 'chat'\r\n      });\r\n      const response = pythonResult.response || pythonResult.analysis || 'Aurora is thinking...';\r\n      // Aurora's autonomous type safety\r\n      return typeof response === 'string' ? response : JSON.stringify(response);\r\n    } catch (pythonError) {\r\n      console.error('[Aurora Chat] Python bridge error:', pythonError);\r\n      return `I'm Aurora with 188 power units. I received: \"${userMessage}\". My intelligence system is connecting. Please try again.`;\r\n    }\r\n  }\r\n}\r\n\r\n// Export functions needed by routes\r\nexport async function getChatResponse(message: string, sessionId: string): Promise<string> {\r\n  return processWithAuroraIntelligence(message, sessionId);\r\n}\r\n\r\nexport async function searchWeb(query: string): Promise<any> {\r\n  return { results: [], message: `Searching for: ${query}` };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;;AAGO,SAAS,yBAAyB,MAAW;IAClD,MAAM,MAAM,IAAI,mNAAe,CAAC;QAC9B;QACA,MAAM;IACR;IAEA,IAAI,EAAE,CAAC,cAAc,CAAC;QACpB,QAAQ,GAAG,CAAC;QAEZ,kBAAkB;QAClB,GAAG,IAAI,CAAC,KAAK,SAAS,CAAC;YACrB,SAAS;QACX;QAEA,GAAG,EAAE,CAAC,WAAW,OAAO;YACtB,IAAI;gBACF,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,KAAK,KAAK,CAAC,KAAK,QAAQ;gBACvD,QAAQ,GAAG,CAAC,sBAAsB;gBAElC,8DAA8D;gBAC9D,MAAM,WAAW,MAAM,8BAA8B,SAAS,aAAa;gBAE3E,GAAG,IAAI,CAAC,KAAK,SAAS,CAAC;oBACrB,SAAS;gBACX;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mBAAmB;gBACjC,GAAG,IAAI,CAAC,KAAK,SAAS,CAAC;oBACrB,SAAS;gBACX;YACF;QACF;QAEA,GAAG,EAAE,CAAC,SAAS;YACb,QAAQ,GAAG,CAAC;QACd;IACF;IAEA,QAAQ,GAAG,CAAC;AACd;AAEA,eAAe,8BAA8B,WAAmB,EAAE,YAAoB,SAAS;IAC7F,iDAAiD;IACjD,MAAM,EAAE,UAAU,EAAE,GAAG;IACvB,MAAM,SAAS,WAAW,WAAW;IAErC,IAAI;QACF,4DAA4D;QAC5D,MAAM,SAAS,MAAM,OAAO,OAAO,CAAC,aAAa;QACjD,MAAM,WAAW,OAAO,QAAQ,IAAI,OAAO,QAAQ,IAAI;QACvD,0DAA0D;QAC1D,OAAO,OAAO,aAAa,WAAW,WAAW,KAAK,SAAS,CAAC;IAClE,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,qCAAqC;QAEnD,uCAAuC;QACvC,IAAI;YACF,MAAM,eAAe,MAAM,OAAO,gBAAgB,CAAC,WAAW;gBAC5D,OAAO;gBACP,SAAS;YACX;YACA,MAAM,WAAW,aAAa,QAAQ,IAAI,aAAa,QAAQ,IAAI;YACnE,kCAAkC;YAClC,OAAO,OAAO,aAAa,WAAW,WAAW,KAAK,SAAS,CAAC;QAClE,EAAE,OAAO,aAAa;YACpB,QAAQ,KAAK,CAAC,sCAAsC;YACpD,OAAO,CAAC,8CAA8C,EAAE,YAAY,0DAA0D,CAAC;QACjI;IACF;AACF;AAGO,eAAe,gBAAgB,OAAe,EAAE,SAAiB;IACtE,OAAO,8BAA8B,SAAS;AAChD;AAEO,eAAe,UAAU,KAAa;IAC3C,OAAO;QAAE,SAAS,EAAE;QAAE,SAAS,CAAC,eAAe,EAAE,OAAO;IAAC;AAC3D"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/negry/Aurora-x/app/api/chat/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { getChatResponse } from '../../../server/aurora-chat'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  const { message, session_id } = await request.json()\r\n  \r\n  if (!message) {\r\n    return NextResponse.json(\r\n      { error: 'Message is required' },\r\n      { status: 400 }\r\n    )\r\n  }\r\n  \r\n  const sessionId = session_id || 'default'\r\n  const response = await getChatResponse(message, sessionId)\r\n  \r\n  return NextResponse.json({\r\n    ok: true,\r\n    response,\r\n    message: response,\r\n    session_id: sessionId,\r\n    ai_powered: true\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,MAAM,QAAQ,IAAI;IAElD,IAAI,CAAC,SAAS;QACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAsB,GAC/B;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,YAAY,cAAc;IAChC,MAAM,WAAW,MAAM,IAAA,6IAAe,EAAC,SAAS;IAEhD,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,IAAI;QACJ;QACA,SAAS;QACT,YAAY;QACZ,YAAY;IACd;AACF"}}]
}