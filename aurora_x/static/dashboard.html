<!doctype html><meta charset="utf-8"/>
<title>Aurora-X Dashboard</title>
<style>
body{font-family:system-ui,Segoe UI,Arial;margin:24px;background:#0b0e11;color:#e8e8e8}
.card{background:#131720;border:1px solid #1f2633;border-radius:10px;padding:16px;margin:12px 0}
h1{margin:0 0 12px}
pre{white-space:pre-wrap;word-break:break-word}
.badge{display:inline-block;padding:4px 8px;border-radius:8px;background:#1f2633;margin-right:8px}
.spark{font-size:24px;letter-spacing:1px}
</style>
<h1>🌌 Aurora-X — Adaptive Learning</h1>
<div class="card">
  <div class="badge">iteration: <span id="iter">0</span></div>
  <div class="badge">biases: <span id="count">0</span></div>
</div>
<div class="card"><h3>Top Bias Summary</h3><pre id="summary">{}</pre></div>
<div class="card"><h3>History (sparklines)</h3><div id="sparks"></div></div>
<script>
async function fetchJSON(u){const r=await fetch(u);return await r.json();}
function spark(vals){if(!vals.length)return '';const blocks='▁▂▃▄▅▆▇█'.split('');let mn=Math.min(...vals), mx=Math.max(...vals);let span=Math.max(1e-9, mx-mn);return vals.slice(-48).map(v=>blocks[Math.floor((v-mn)/span*(blocks.length-1))]).join('');}
async function refresh(){
  const s = await fetchJSON('/api/adaptive_stats');
  const h = await fetchJSON('/api/seed_bias/history');
  document.getElementById('iter').textContent = s.iteration||0;
  document.getElementById('count').textContent = Object.keys(s.summary||{}).length;
  document.getElementById('summary').textContent = JSON.stringify(s.summary||{}, null, 2);

  // group history per key
  const byKey = {};
  (h.history||[]).forEach(([it,k,v]) => { (byKey[k]=byKey[k]||[]).push(v); });
  const sparks = Object.entries(byKey).map(([k,vals]) => `<div><b>${k}</b>: <span class="spark">${spark(vals)}</span></div>`).join('');
  document.getElementById('sparks').innerHTML = sparks || '(no history yet)';
}
setInterval(refresh, 1500); refresh();
</script>